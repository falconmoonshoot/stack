"use strict";angular.module("moonshootApp",["firebase","ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","checklist-model","angularMoment"]).run(["$rootScope","$location","$state",function(a,b,c){a.$on("$stateChangeStart",function(a,b,c,d,e){var f="login"===b.name})}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){b.otherwise("/login"),a.state("login",{url:"/login",templateUrl:"components/login/login.html"}).state("analytics",{url:"/analytics",templateUrl:"components/analytics/analytics.html"}).state("landingpage",{url:"/personal/:effortGuid",templateUrl:"components/landingpage/landingpage.html"}).state("callback",{url:"/auth",templateUrl:"components/callback/callback.html"}),c.html5Mode(!0)}]),angular.module("moonshootApp").controller("MainCtrl",["$scope","$state","$stateParams","$http","$filter","$firebaseObject",function(a,b,c,d,e,f){console.log(c.auth),a.guid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+a()+a()+a()+a()+a()+a()},a.userIdGuid=a.guid(),a.salesPersonEmail="mike@salesramp.io",a.firstName="Mike",a.lastName="Pollack";var g=new Firebase("https://glowing-torch-9335.firebaseio.com/"+a.userIdGuid),h=f(g);h.$bindTo(a,"user"),a.contacts=[{name:"Patrick Malley",type:"Contact",checked:!1,email:"steven.m.simoni+1@gmail.com"},{name:"Patrick Michael",type:"Contact",checked:!1,email:"steven.m.simoni+2@gmail.com"},{name:"Ray Carrol",type:"Contact",checked:!1,email:"steven.m.simoni+3@gmail.com"},{name:"Patrick Martin",type:"Contact",checked:!1,email:"steven.m.simoni+4@gmail.com"},{name:"Scott Hutchins",type:"Contact",checked:!1,email:"steven.m.simoni+5@gmail.com"},{name:"Randy Flores",type:"Contact",checked:!1,email:"steven.m.simoni+6@gmail.com"},{name:"Rio Sites",type:"Contact",checked:!1,email:"steven.m.simoni+7@gmail.com"},{name:"Caitlin Garlow",type:"Contact",checked:!1,email:"steven.m.simoni+8@gmail.com"}],a.selectedUsers=[],a.sendFalcon=function(){a.recordingUniqueId&&angular.forEach(a.selectedUsers,function(b,c){a.falconGuid=a.guid();var d=new Firebase("https://glowing-torch-9335.firebaseio.com/"+a.falconGuid);d.update({creatorGuid:a.firstName+" "+a.lastName,creatorEmail:a.salesPersonEmail,name:a.falconTitle,status:"sent",userGuid:b.email,userName:b.name,videoGuid:a.recordingUniqueId}),a.sendemail(b.email,b.name,a.falconGuid)})},a.falcons=[{name:"This is the best event ever!",views:20,publish_date:"05/09/2015"},{name:"Video Hack Day 2015!",views:1,publish_date:"05/09/2015"},{name:"I really wanna win the Dropcam Prizes!",views:15,publish_date:"05/09/2015"},{name:"Firebase has Changed my Life!",views:40,publish_date:"05/09/2015"}],a.sendemail=function(a,b,c){$.ajax({type:"POST",url:"https://mandrillapp.com/api/1.0/messages/send.json",data:{key:"sVS2sg9fxEQL-dRBlp5Ayw",message:{from_email:"videohackday@salesramp.io",to:[{email:a,name:b,type:"to"}],autotext:"true",subject:"A New Falcon has Landed",html:"Your new falcon is at url: www.falconmoonshoot.com/personal/"+c}}}).done(function(a){console.log(a)})},ZiggeoApi.Events.on("submitted",function(b){a.recordingUniqueId=b.video.token,console.log("unique id ",a.recordingUniqueId),a.user.videos?a.user.videos.push(a.recordingUniqueId):a.user.videos=[a.recordingUniqueId],a.$apply(function(){a.videoRecorded=!0})})}]),angular.module("moonshootApp").config(["$stateProvider",function(a){a.state("main",{url:"/",params:{auth:null},templateUrl:"app/main/main.html",controller:"MainCtrl"})}]),angular.module("moonshootApp").controller("AnalyticsPageCtrl",["$scope","$location","$stateParams","$firebaseObject",function(a,b,c,d){var e=new Firebase("https://glowing-torch-9335.firebaseio.com/");a.logEvents=[],a.eventLimit=15,e.child("myfirstcreator").on("value",function(b){var c=b.val();angular.forEach(c.eventlog,function(b,c){a.logEvents.push(b)}),console.log(a.logEvents),a.$apply()}),a.totalMinutes=Math.floor(100*Math.random()+20),a.totalFalcons=Math.floor(10*Math.random()+1),a.totalMoonshots=Math.floor(10*Math.random()+1)}]),angular.module("moonshootApp").controller("LandingPageCtrl",["$scope","$location","$stateParams","$firebaseObject",function(a,b,c,d){a.lp=!0,a.effortGuidPath=c.effortGuid;var e,f=new Firebase("https://glowing-torch-9335.firebaseio.com/"+a.effortGuidPath),g=d(f),h=!1;g.$bindTo(a,"effortGuid");var i=g.$watch(function(){if(f.update({status:"opened"}),g.creatorGuid&&!h){e=new Firebase("https://glowing-torch-9335.firebaseio.com/"+g.creatorGuid+"/eventlog");var a=d(e);console.dir(a),e.push({event_type:"Landing Page Opened",event_falcon:g.name,event_user:g.userName,event_time:(new Date).getTime()}),h=!0}if(g.videoGuid){var b=ZiggeoApi.Videos.get(g.videoGuid).streams[0].video_height,c=ZiggeoApi.Videos.get(g.videoGuid).streams[0].video_width;$("#player").height(b),$("#player").width(c),ZiggeoApi.Events.on("play",function(a){console.dir(a),e.push({event_type:"Playback started",event_falcon:g.name,event_user:g.userName,event_time:(new Date).getTime()})}),ZiggeoApi.Events.on("stop",function(a){console.dir(a),e.push({event_type:"Playback stopped",event_falcon:g.name,event_user:g.userName,event_time:(new Date).getTime()})}),ZiggeoApi.Events.on("pause",function(a){console.dir(a),e.push({event_type:"Playback paused",event_falcon:g.name,event_user:g.userName,event_time:(new Date).getTime()})}),ZiggeoApi.Embed.embed("#player",{video:g.videoGuid,modes:["player"]})}g.status="Opened",i()});a.isCollapsed=!0,a.isActive=function(a){return a===b.path()}}]),angular.module("moonshootApp").controller("LoginCtrl",["$scope","$state","$location","$stateParams","$firebaseObject",function(a,b,c,d,e){if(c.hash()){var f=c.hash().split("&"),g=0,h={};f.forEach(function(a){g++,h[a.split("=")[0]]=a.split("=")[1]}),g>0&&b.go("main",{auth:h});h.instance_url+"/services/data/v33.0/query/q=Select+Name+from+Contact"}a.isCollapsed=!0,a.isActive=function(a){return a===c.path()}}]),angular.module("moonshootApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("moonshootApp").controller("NavbarCtrl",["$scope","$location","$stateParams",function(a,b,c){a.menu=[{title:"Home",link:"/"}],-1!==b.path().indexOf("personal")&&(a.personal=!0),a.isCollapsed=!0,a.isActive=function(a){return a===b.path()}}]),angular.module("moonshootApp").run(["$templateCache",function(a){a.put("app/main/main.html",'<div style=padding-top:50px class=container><div class=row><div class=col-lg-8><h3>Welcome Mike:</h3></div></div><div class=row><div class=col-xs-12><input ng-model=falconTitle placeholder="1. Title your Falcon" class=bigSingleInput autofocus><!--<h1 class=\'fontweight300\' style=\'display:inline-block\' popover="A simple video message goes a long way." popover-trigger="mouseenter" popover-placement=\'right\'></h1>--></div><div class=col-lg-8><h3 tooltip="A moonshoot is a great way to communicate with customers and prospects" class=page-header>2. Record a Video:</h3><ziggeo ziggeo-width=640 ziggeo-height=480 ziggeo-meta_profile=bc1cd9329d4776dffe0609004fe397d4></ziggeo></div><div class=col-lg-4><h3 class=page-header>3. Select Contacts:<ul><li class=falconstyle ng-repeat="contact in contacts"><input type=checkbox checklist-model=selectedUsers checklist-value=contact type="checkbox"> {{contact.name}}</li><div style=font-size:22px;color:orange>Total: ({{selectedUsers.length}})</div></ul></h3></div></div><div class=row><div class=col-lg-12><div class=text-center style=padding-top:45px><button style=font-size:32px;font-weight:300 class="btn btn-primary" ng-click=sendFalcon()>Send Falcon</button></div></div></div><div class=row><div class=col-xs-12><h3 class=page-header>My Studio:</h3></div><div class=col-xs-8><table class="table table-bordered table-hover bg-white topmargin"><tr style="font-weight: bold"><td style=width:35%>Title</td><td style=width:10%>Views</td><td style=width:10%>Stats</td><td style=width:10%>Created date</td><td style=width:20%>Action</td></tr><tr ng-repeat="falcon in falcons"><td><span>{{falcon.name}}</span></td><td><span>{{falcon.views}}</span></td><td><span><a ui-sref=analytics>view report</a></span></td><td><span>{{falcon.publish_date}}</span></td><td style="white-space: nowrap"><!-- form--><div class=buttons><button ng-click="expand(play);gettype(\'email\')" tooltip=email class="btn btn-sm btn-info"><em class="fa fa-envelope"></em></button> <button ng-click="expand(play);gettype(\'mobile\')" tooltip=text class="btn btn-sm btn-info modfont"><em class="fa fa-mobile"></em></button> <button ng-click="confirm=$index" tooltip=delete class="btn btn-sm btn-danger"><em class="fa fa-trash"></em></button></div></td></tr></table></div></div></div><footer class=footer><div class=container><p>Falcon Moonshoot | <a href=https://twitter.com/falconmoonshoot>@falconMoonshoot</a> | <a href="https://github.com/DaftMonk/generator-angular-fullstack/issues?state=open">Made with Love in NYC</a></p></div></footer>'),a.put("components/analytics/analytics.html",'<div ng-controller=AnalyticsPageCtrl style="padding-top: 50px"><div class=col-md-4><h1>Total Falcons</h1><h1 style="color: white; background-color: #777777; display: inline-block; padding: 10px 20px; border-radius: 50px; width: 120px; font-size: 60px; text-align: center">{{totalFalcons}}</h1><h1>Total Moonshots</h1><h1 style="color: white; background-color: #777777; display: inline-block; padding: 10px 20px; border-radius: 50px; width: 120px; font-size: 60px; text-align: center">{{totalMoonshots}}</h1><h1>Total Minutes</h1><h1 style="color: white; background-color: #777777; display: inline-block; padding: 10px 20px; border-radius: 50px; width: 120px; font-size: 60px; text-align: center">{{totalMinutes}}</h1></div><div class=col-md-8><h1>Latest Activity</h1><ul ng-repeat="logEvent in logEvents | limitTo:eventLimit"><li>{{logEvent.event_type}} &middot; {{logEvent.event_time | amDifference : null : \'minutes\' }} mins ago &middot; {{logEvent.event_user}}</li></ul></div></div>'),a.put("components/callback/callback.html","sadfadsfads"),a.put("components/landingpage/landingpage.html","<div ng-controller=LandingPageCtrl><div class=container style=padding-top:50px><div class=row><h2 class=page-header>You've received a Falcon from {{effortGuid.username}}:</h2><!--\n    Loading Personalized Video for GUID: {{effortGuid.name}} <br/>\n    <br/>\n    Video ID (from firebase) : {{effortGuid.videoGuid}} <br/>\n    User ID (from firebase) : {{effortGuid.userGuid}} <br/>\n    Status : {{effortGuid.status}} <br/>\n    Other User Metadata: <br/>--><div class=stylePlayer id=player></div></div><div class=row><h2 class=page-header>Respond Back:</h2><!--\n    Loading Personalized Video for GUID: {{effortGuid.name}} <br/>\n    <br/>\n    Video ID (from firebase) : {{effortGuid.videoGuid}} <br/>\n    User ID (from firebase) : {{effortGuid.userGuid}} <br/>\n    Status : {{effortGuid.status}} <br/>\n    Other User Metadata: <br/>--><ziggeo class=stylePlayer></ziggeo></div></div></div><div id=player></div>"),a.put("components/login/login.html",'<div ng-controller=LoginCtrl><div style=padding-top:150px class=container><div class="col-md-4 col-md-offset-3"><div class=list-group><a href="https://login.salesforce.com/services/oauth2/authorize?response_type=token&client_id=3MVG9sG9Z3Q1Rlbdh8cds.P2v.Fv9AhIQiKXoVWXXMQSwbjLsY1qdBewcq0adiFZzhe45gIyQmqVvD5KdhDeQ&redirect_uri=http%3A%2F%2Flocalhost:9000%2Flogin" class=list-group-item><img class=span1 src=http://www.appleunity.de/wp-content/uploads/2011/05/salesforce_icon.png height=64> <span class=span2>Authenticate with Salesforce</span></a> <a href=# class=list-group-item><img src=http://okanaganwebdeveloper.com/wp-content/uploads/2015/02/icon.png height=64> <span>Authenticate with Google</span></a> <a href=# class=list-group-item><img src=http://icons.iconarchive.com/icons/igh0zt/ios7-style-metro-ui/512/MetroUI-Apps-Dropbox-icon.png height=64> <span>Authenticate with Dropbox</span></a> <a href=# class=list-group-item><img src=http://p3cdn4static.sharpschool.com/UserFiles/Servers/Server_3514759/Image/JrSr%20High/Band%20and%20Music/1209872_20531316728_442276420_n.jpg height=64> <span>Authenticate with Facebook</span></a> <a href=# class=list-group-item><img src=http://cdn2.hubspot.net/hub/433227/file-2647074740-png/Social_Media_Icons/LinkedIn_Icon.png height=64> <span>Authenticate with Linkedin</span></a></div></div></div></div>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<header ng-controller=NavbarCtrl id=header style="-webkit-transform: none"><div class=header1><a class=js-use-pushstate id=logo href=http://www.salesramp.io target=_blank><div class=logo><img src="/assets/images/3e4ec264.falcon.png"></div></a><nav class=hide-on-mobile id=primaryNavigation><ul ng-hide=personal class="nav navbar-nav nav-falcon"><!--<li ng-hide=\'isSearchActive\' ui-sref-active="active1"><a ui-sref="timeline">Timeline</a></li>--><li ui-sref-active=active1><a ui-sref=main>Home</a></li><li ui-sref-active=active1><a ui-sref=analytics>Analytics</a></li><!--<li ng-hide=\'isSearchActive\' ui-sref-active="active1"><a ui-sref="competitions">Competitions</a></li>--></ul></nav></div></header>')}]);